<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Crossify.io</title>
    <script>
      // Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // This script handles both custom domain (crossify.io) and GitHub Pages subdirectory
      
      (function() {
        var l = window.location;
        var path = l.pathname;
        
        // If we're already on index.html with a query parameter, let index.html handle it
        if (path.includes('/index.html') && l.search[1] === '/') {
          return;
        }
        
        // Prevent infinite loops - if we're already on index.html, don't redirect again
        if (path.includes('/index.html') || path.includes('/index.htm')) {
          return;
        }
        
        // Don't redirect if path is just / or /index.html (already at root)
        if (path === '/' || path === '' || path === '/index.html' || path === '/index.htm') {
          return;
        }
        
        // Remove leading /index.html or /index.htm if present (prevent loops)
        path = path.replace(/^\/index\.html?\/?/i, '/');
        
        // Ensure path starts with /
        if (!path.startsWith('/')) {
          path = '/' + path;
        }
        
        // Don't redirect if path is just / after cleanup
        if (path === '/' || path === '') {
          return;
        }
        
        // Build redirect URL - use root base for custom domain
        var redirectPath = '/index.html?/' + path.slice(1) + l.search + l.hash;
        
        // Only redirect if we're not already there
        if (l.pathname + l.search + l.hash !== redirectPath) {
          window.location.replace(redirectPath);
        }
      })();
    </script>
  </head>
  <body>
    <p>Redirecting...</p>
  </body>
</html>

